Hfsdb Directory - Word-by-Word Resource
Overview
Location: assets/quran/Hfsdb/
Purpose: Word-by-word Quran data with connected Arabic text and page-specific fonts

Contents
1. Word-by-Word Database
File: qpc-hafs-word-by-word.db
Size: 3,465,216 bytes

Schema
TABLE words (
  id INTEGER,
  location TEXT,      -- Format: "surah:ayah:word" (e.g., "1:1:1")
  surah INTEGER,      -- Surah number (1-114)
  ayah INTEGER,       -- Ayah number within surah
  word INTEGER,       -- Word position within ayah
  text TEXT           -- Connected Arabic text
)
Data Volume
Total words: 83,668
Total surahs: 114
Text format: Connected Arabic (بِسۡمِ ٱللَّهِ) - NOT isolated glyphs
Example Data
Surah 1, Ayah 1:
  1:1:1: بِسۡمِ
  1:1:2: ٱللَّهِ
  1:1:3: ٱلرَّحۡمَٰنِ
  1:1:4: ٱلرَّحِيمِ
  1:1:5: ١ (ayah number marker)
2. Page-Specific Fonts
Directory: Hfsdb/fonts/
Total: 605 font files

File Pattern
p1.ttf (Page 1) - 618,744 bytes
p2.ttf (Page 2) - 357,932 bytes
...
p604.ttf (Page 604) - 163,044 bytes
p605.ttf (Extra/Special page?) - size unknown
Font Size Trends
Larger pages (early Quran, longer surahs): 400-600 KB
Medium pages: 300-400 KB
Smaller pages (Juz 30, short surahs): 150-300 KB
Purpose
Each page has a custom font file containing the exact glyphs needed for that page. This allows:

Optimized font loading (only load fonts for visible pages)
Precise glyph rendering for each page's specific text
Reduced memory footprint vs. loading one massive font
✅ Primary Use Cases
1. Library / List Views
// Get all words from Surah 2
SELECT * FROM words WHERE surah = 2 ORDER BY ayah, word
// Count words per surah (useful for list metadata)
SELECT surah, COUNT(*) as word_count 
FROM words 
GROUP BY surah
Perfect for:

Surah selection screens
Browse by Juz/Hizb with surah organization
"Recently read" tracking by surah:ayah
2. Word-by-Word Tafseer Display
// Get all words for a specific verse
SELECT * FROM words 
WHERE surah = 2 AND ayah = 255 
ORDER BY word
// Result: Ayat al-Kursi broken down word-by-word
// Word 1: ٱللَّهُ
// Word 2: لَآ
// Word 3: إِلَٰهَ
// ...each word can have its own translation/tafseer
Perfect for:

Word-by-word translation display
Tajweed/pronunciation learning
Grammar analysis (إعراب)
3. Search & Filter
// Find a specific verse by location
SELECT * FROM words WHERE location = '2:255:1'
// Get all words from a range of verses
SELECT * FROM words 
WHERE surah = 2 AND ayah BETWEEN 1 AND 10
ORDER BY ayah, word
Perfect for:

Quick verse lookup
Citation/reference tools
Bookmarking system
4. Word Frequency Analysis
// Count occurrences of "Allah"
SELECT COUNT(*) FROM words WHERE text LIKE '%ٱللَّهِ%'
// Most common words in the Quran
SELECT text, COUNT(*) as frequency 
FROM words 
GROUP BY text 
ORDER BY frequency DESC 
LIMIT 100
Perfect for:

Quranic statistics
Word study tools
Concordance features
Comparison with Other Databases
Feature	Hfsdb word-by-word.db	qpc-v1-glyph-codes-wbw.db	ayahinfo.db
Text Format	Connected Arabic	Isolated glyphs (ﭑ ﭒ)	N/A (coords only)
Organization	Surah/Ayah/Word	Surah/Ayah/Word	Page/Line
Total Words	83,668	83,668	N/A
Use Case	✅ Library/Lists/Search	Alternative text format	✅ Mushaf rendering
Page Info	❌ No	❌ No	✅ Yes
Filtering	✅ Excellent (by surah/ayah)	✅ Excellent	⚠️ By page only
Integration with Mushaf Rendering
⚠️ Important Distinction
Hfsdb is NOT for Mushaf page rendering
Hfsdb IS for library/search/study features

Mushaf Page View:
  ✅ Use: qpc-v1-15-lines.db (layout)
  ✅ Use: ayahinfo.db (glyph counts)
  ✅ Use: mushaf_v2_map.txt (text)
  ❌ Don't use: Hfsdb (no page/line info)
Library/List View:
  ✅ Use: Hfsdb/qpc-hafs-word-by-word.db (surah/ayah organization)
  ✅ Use: quran_uthmani.json (alternative text source)
  ❌ Don't use: mushaf_v2_map.txt (page-organized, not verse-organized)
Page Fonts Usage
When to Load Page Fonts
// Only load fonts for visible pages
void loadPageFont(int pageNumber) {
  final fontPath = 'assets/quran/Hfsdb/fonts/p$pageNumber.ttf';
  // Load font dynamically
}
// Example: PageView with lazy font loading
PageView.builder(
  itemBuilder: (context, index) {
    final pageNum = index + 1;
    loadPageFont(pageNum);  // Load font for this page
    return MushafPage(pageNum);
  }
);
Memory Optimization
Don't load all 605 fonts at once!
Load fonts for current + adjacent pages (for smooth scrolling)
Unload fonts for pages far from viewport
✅ Recommendations
For Library Features (Future Implementation)
✅ Use qpc-hafs-word-by-word.db for:

Surah list with metadata
Verse browsing by surah
Word-by-word study mode
Search/concordance
✅ Use page fonts (p1.ttf through p604.ttf) for:

Optimized mushaf page rendering
Lazy loading fonts as user scrolls
Reducing app size (don't bundle unused glyphs)
For Current Mushaf Rendering
✅ Continue using qpc-v1-15-lines.db + ayahinfo.db + mushaf_v2_map.txt
⚠️ Don't try to use Hfsdb for page layout (it's organized by surah, not page)
Summary
Hfsdb = Perfect for Library, Search & Study Features

83,668 words indexed by surah:ayah:word
Connected Arabic text (easy to display)
Excellent filtering by surah/ayah
605 page-specific fonts for optimized rendering
Keep using existing databases for Mushaf page rendering

They're organized by page/line (which Hfsdb is not)